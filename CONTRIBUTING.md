# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢ä½ è€ƒè™‘ä¸º StrockDify åšå‡ºè´¡çŒ®ï¼ğŸ‰

## ğŸ“‹ ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [å¦‚ä½•è´¡çŒ®](#å¦‚ä½•è´¡çŒ®)
- [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æäº¤è§„èŒƒ](#æäº¤è§„èŒƒ)
- [é—®é¢˜åé¦ˆ](#é—®é¢˜åé¦ˆ)

---

## è¡Œä¸ºå‡†åˆ™

### æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†è¥é€ ä¸€ä¸ªå¼€æ”¾å’Œå‹å¥½çš„ç¯å¢ƒï¼Œæˆ‘ä»¬æ‰¿è¯ºï¼š

- ä½¿ç”¨å‹å¥½å’ŒåŒ…å®¹çš„è¯­è¨€
- å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
- ä¼˜é›…åœ°æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- å…³æ³¨å¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
- å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç¤ºåŒç†å¿ƒ

### ä¸å¯æ¥å—çš„è¡Œä¸º

- ä½¿ç”¨æ€§åŒ–çš„è¯­è¨€æˆ–å›¾åƒ
- äººèº«æ”»å‡»æˆ–ä¾®è¾±æ€§è¯„è®º
- å…¬å¼€æˆ–ç§ä¸‹éªšæ‰°
- æœªç»è®¸å¯å‘å¸ƒä»–äººçš„ç§äººä¿¡æ¯
- å…¶ä»–ä¸é“å¾·æˆ–ä¸ä¸“ä¸šçš„è¡Œä¸º

---

## å¦‚ä½•è´¡çŒ®

### æŠ¥å‘Š Bug

å¦‚æœä½ å‘ç°äº† Bugï¼Œè¯·ï¼š

1. æ£€æŸ¥ [Issues](https://github.com/rjwang1982/StrockDify/issues) æ˜¯å¦å·²æœ‰ç›¸åŒé—®é¢˜
2. å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–° Issueï¼ŒåŒ…å«ï¼š
   - æ¸…æ™°çš„æ ‡é¢˜
   - è¯¦ç»†çš„é—®é¢˜æè¿°
   - å¤ç°æ­¥éª¤
   - é¢„æœŸè¡Œä¸º vs å®é™…è¡Œä¸º
   - ç¯å¢ƒä¿¡æ¯ï¼ˆPython ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰
   - é”™è¯¯æ—¥å¿—æˆ–æˆªå›¾

**Bug æŠ¥å‘Šæ¨¡æ¿ï¼š**
```markdown
## Bug æè¿°
ç®€è¦æè¿°é—®é¢˜

## å¤ç°æ­¥éª¤
1. æ‰§è¡Œ '...'
2. è¾“å…¥ '...'
3. çœ‹åˆ°é”™è¯¯ '...'

## é¢„æœŸè¡Œä¸º
åº”è¯¥å‘ç”Ÿä»€ä¹ˆ

## å®é™…è¡Œä¸º
å®é™…å‘ç”Ÿäº†ä»€ä¹ˆ

## ç¯å¢ƒä¿¡æ¯
- Python ç‰ˆæœ¬ï¼š3.9
- æ“ä½œç³»ç»Ÿï¼šmacOS 13.0
- StrockDify ç‰ˆæœ¬ï¼š1.0.0

## é”™è¯¯æ—¥å¿—
```
ç²˜è´´é”™è¯¯æ—¥å¿—
```

## æˆªå›¾
å¦‚æœé€‚ç”¨ï¼Œæ·»åŠ æˆªå›¾
```

### å»ºè®®æ–°åŠŸèƒ½

å¦‚æœä½ æœ‰æ–°åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š

1. æ£€æŸ¥ [Issues](https://github.com/rjwang1982/StrockDify/issues) æ˜¯å¦å·²æœ‰ç±»ä¼¼å»ºè®®
2. åˆ›å»ºæ–° Issueï¼Œæ ‡è®°ä¸º `enhancement`ï¼ŒåŒ…å«ï¼š
   - åŠŸèƒ½æè¿°
   - ä½¿ç”¨åœºæ™¯
   - é¢„æœŸæ•ˆæœ
   - å¯èƒ½çš„å®ç°æ–¹æ¡ˆ

**åŠŸèƒ½å»ºè®®æ¨¡æ¿ï¼š**
```markdown
## åŠŸèƒ½æè¿°
ç®€è¦æè¿°æ–°åŠŸèƒ½

## ä½¿ç”¨åœºæ™¯
ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Ÿ

## é¢„æœŸæ•ˆæœ
åŠŸèƒ½åº”è¯¥å¦‚ä½•å·¥ä½œï¼Ÿ

## å¯èƒ½çš„å®ç°æ–¹æ¡ˆ
å¦‚æœæœ‰æƒ³æ³•ï¼Œæè¿°å¦‚ä½•å®ç°

## æ›¿ä»£æ–¹æ¡ˆ
æ˜¯å¦æœ‰å…¶ä»–è§£å†³æ–¹æ¡ˆï¼Ÿ
```

### æäº¤ä»£ç 

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## å¼€å‘æµç¨‹

### 1. è®¾ç½®å¼€å‘ç¯å¢ƒ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/rjwang1982/StrockDify.git
cd StrockDify

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv myenv
source myenv/bin/activate  # macOS/Linux
# æˆ– myenv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…å¼€å‘ä¾èµ–ï¼ˆå¦‚æœæœ‰ï¼‰
pip install pytest black flake8 mypy
```

### 2. åˆ›å»ºåˆ†æ”¯

```bash
# ä» main åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯
git checkout -b feature/your-feature-name

# æˆ–ä¿®å¤ Bug
git checkout -b fix/bug-description
```

### 3. å¼€å‘å’Œæµ‹è¯•

```bash
# è¿è¡ŒæœåŠ¡å™¨
python src/strock.py

# è¿è¡Œæµ‹è¯•
python src/test_client.py

# ä»£ç æ ¼å¼åŒ–
black src/

# ä»£ç æ£€æŸ¥
flake8 src/
```

### 4. æäº¤æ›´æ”¹

```bash
# æ·»åŠ æ–‡ä»¶
git add .

# æäº¤ï¼ˆéµå¾ªæäº¤è§„èŒƒï¼‰
git commit -m "feat: add new feature"

# æ¨é€åˆ°è¿œç¨‹
git push origin feature/your-feature-name
```

### 5. åˆ›å»º Pull Request

1. è®¿é—® GitHub ä»“åº“
2. ç‚¹å‡» "Pull Request"
3. é€‰æ‹©ä½ çš„åˆ†æ”¯
4. å¡«å†™ PR æè¿°
5. ç­‰å¾…å®¡æ ¸

---

## ä»£ç è§„èŒƒ

### Python ä»£ç é£æ ¼

éµå¾ª [PEP 8](https://pep8.org/) è§„èŒƒï¼š

```python
# å¥½çš„ç¤ºä¾‹
def calculate_rsi(series, period=14):
    """
    è®¡ç®— RSI æŒ‡æ ‡
    
    Args:
        series: ä»·æ ¼åºåˆ—
        period: è®¡ç®—å‘¨æœŸ
        
    Returns:
        RSI å€¼
    """
    delta = series.diff()
    gain = delta.where(delta > 0, 0).rolling(window=period).mean()
    loss = -delta.where(delta < 0, 0).rolling(window=period).mean()
    rs = gain / loss
    return 100 - (100 / (1 + rs))
```

### å‘½åè§„èŒƒ

- **å˜é‡å’Œå‡½æ•°**ï¼šå°å†™ + ä¸‹åˆ’çº¿ (`stock_code`, `calculate_score`)
- **ç±»å**ï¼šå¤§é©¼å³° (`StockAnalyzer`, `TechnicalIndicator`)
- **å¸¸é‡**ï¼šå¤§å†™ + ä¸‹åˆ’çº¿ (`MAX_RETRIES`, `API_TIMEOUT`)
- **ç§æœ‰å˜é‡**ï¼šå‰ç¼€ä¸‹åˆ’çº¿ (`_internal_cache`)

### æ–‡æ¡£å­—ç¬¦ä¸²

ä½¿ç”¨ Google é£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼š

```python
def get_stock_data(stock_code, market_type='A', start_date=None):
    """
    è·å–è‚¡ç¥¨æ•°æ®
    
    Args:
        stock_code (str): è‚¡ç¥¨ä»£ç 
        market_type (str): å¸‚åœºç±»å‹ï¼Œé»˜è®¤ 'A'
        start_date (str): å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ YYYYMMDD
        
    Returns:
        pd.DataFrame: è‚¡ç¥¨æ•°æ®
        
    Raises:
        ValueError: è‚¡ç¥¨ä»£ç æ ¼å¼é”™è¯¯
        Exception: æ•°æ®è·å–å¤±è´¥
        
    Example:
        >>> df = get_stock_data('600519', 'A')
        >>> print(df.head())
    """
    pass
```

### ä»£ç æ³¨é‡Š

```python
# å¥½çš„æ³¨é‡Šï¼šè§£é‡Šä¸ºä»€ä¹ˆ
# ä½¿ç”¨å‰å¤æƒæ•°æ®ï¼Œé¿å…é™¤æƒé™¤æ¯å½±å“æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
df = ak.stock_zh_a_hist(symbol=stock_code, adjust="qfq")

# ä¸å¥½çš„æ³¨é‡Šï¼šé‡å¤ä»£ç 
# è·å–è‚¡ç¥¨æ•°æ®
df = ak.stock_zh_a_hist(symbol=stock_code, adjust="qfq")
```

---

## æäº¤è§„èŒƒ

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

### æäº¤ç±»å‹

- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: é‡æ„ï¼ˆä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤ï¼‰
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

### æäº¤æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

### ç¤ºä¾‹

```bash
# ç®€å•æäº¤
git commit -m "feat: add RSI indicator calculation"

# è¯¦ç»†æäº¤
git commit -m "feat(indicators): add RSI indicator calculation

- Implement RSI calculation function
- Add unit tests for RSI
- Update documentation

Closes #123"

# ä¿®å¤ Bug
git commit -m "fix: correct MACD signal calculation

The previous implementation had an off-by-one error in the
signal line calculation.

Fixes #456"

# ç ´åæ€§å˜æ›´
git commit -m "feat!: change API response format

BREAKING CHANGE: The API now returns data in a different format.
Update your client code accordingly."
```

---

## é—®é¢˜åé¦ˆ

### æé—®å‰

1. é˜…è¯» [README.md](README.md)
2. æŸ¥çœ‹ [æ–‡æ¡£](docs/)
3. æœç´¢ [å·²æœ‰ Issues](https://github.com/rjwang1982/StrockDify/issues)

### æé—®æ—¶

ä½¿ç”¨æ¸…æ™°çš„æ ‡é¢˜å’Œè¯¦ç»†çš„æè¿°ï¼š

```markdown
## é—®é¢˜
æˆ‘åœ¨å°è¯•åˆ†ææ¸¯è‚¡æ—¶é‡åˆ°é”™è¯¯

## ç¯å¢ƒ
- Python 3.9
- macOS 13.0
- StrockDify 1.0.0

## å¤ç°æ­¥éª¤
1. è¿è¡Œ `python src/strock.py`
2. è°ƒç”¨ API: `POST /analyze-stock/`
3. è¯·æ±‚ä½“: `{"stock_code": "00700", "market_type": "HK"}`

## é”™è¯¯ä¿¡æ¯
```
ValueError: Invalid stock code format
```

## é¢„æœŸè¡Œä¸º
åº”è¯¥è¿”å›è…¾è®¯æ§è‚¡çš„åˆ†ææ•°æ®
```

---

## Pull Request æ£€æŸ¥æ¸…å•

æäº¤ PR å‰ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] ä»£ç éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒ
- [ ] æ·»åŠ äº†å¿…è¦çš„æµ‹è¯•
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æäº¤ä¿¡æ¯éµå¾ªæäº¤è§„èŒƒ
- [ ] PR æè¿°æ¸…æ™°ï¼Œè¯´æ˜äº†æ›´æ”¹å†…å®¹
- [ ] å…³è”äº†ç›¸å…³çš„ Issueï¼ˆå¦‚æœæœ‰ï¼‰

---

## å®¡æ ¸æµç¨‹

1. **è‡ªåŠ¨æ£€æŸ¥**ï¼šCI/CD è‡ªåŠ¨è¿è¡Œæµ‹è¯•
2. **ä»£ç å®¡æ ¸**ï¼šç»´æŠ¤è€…å®¡æ ¸ä»£ç 
3. **è®¨è®º**ï¼šå¦‚æœ‰éœ€è¦ï¼Œè¿›è¡Œè®¨è®ºå’Œä¿®æ”¹
4. **åˆå¹¶**ï¼šå®¡æ ¸é€šè¿‡ååˆå¹¶åˆ° main åˆ†æ”¯

---

## è·å–å¸®åŠ©

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼š

- ğŸ“§ å‘é€é‚®ä»¶åˆ°é¡¹ç›®ç»´æŠ¤è€…
- ğŸ’¬ åœ¨ [Discussions](https://github.com/rjwang1982/StrockDify/discussions) ä¸­æé—®
- ğŸ› åœ¨ [Issues](https://github.com/rjwang1982/StrockDify/issues) ä¸­æŠ¥å‘Šé—®é¢˜

---

## è®¸å¯è¯

é€šè¿‡è´¡çŒ®ä»£ç ï¼Œä½ åŒæ„ä½ çš„è´¡çŒ®å°†åœ¨ [MIT License](LICENSE) ä¸‹å‘å¸ƒã€‚

---

**æ„Ÿè°¢ä½ çš„è´¡çŒ®ï¼** ğŸ™
